#!/bin/bash

# List of Pokémon
POKEMON_LIST=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")

# API endpoint
BASE_URL="https://pokeapi.co/api/v2/pokemon/"

# Error file
ERROR_FILE="errors.txt"

# Loop through each Pokémon
for POKEMON in "${POKEMON_LIST[@]}"; do
    OUTPUT_FILE="${POKEMON}.json"
    
    echo "Fetching data for $POKEMON..."
    
    # Make the API request and handle errors
    curl -s -o "$OUTPUT_FILE" -w "%{http_code}" "${BASE_URL}${POKEMON}" | {
        read -r HTTP_CODE
        if [ "$HTTP_CODE" -eq 200 ]; then
            echo "Data for $POKEMON saved to $OUTPUT_FILE."
        else
            echo "Failed to fetch data for $POKEMON. HTTP Status: $HTTP_CODE" | tee -a "$ERROR_FILE"
            rm -f "$OUTPUT_FILE"  # Remove any incomplete JSON file
        fi
    }
    
    # Add a delay to avoid rate-limiting issues
    sleep 2
done
